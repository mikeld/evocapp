/*!
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){'use strict';var e=function(){this.init()},a,c,d,b,i,j,g,h,f;e.prototype={init:function(){var b=this||a;return b._counter=1e3,b._codecs={},b._howls=[],b._muted=!1,b._volume=1,b._canPlayEvent='canplaythrough',b._navigator=typeof window!='undefined'&&window.navigator?window.navigator:null,b.masterGain=null,b.noAudio=!1,b.usingWebAudio=!0,b.autoSuspend=!0,b.ctx=null,b.mobileAutoEnable=!0,b._setup(),b},volume:function(c){var b=this||a,d,h,g,e;if(c=parseFloat(c),b.ctx||f(),typeof c!='undefined'&&c>=0&&c<=1){if(b._volume=c,b._muted)return b;b.usingWebAudio&&b.masterGain.gain.setValueAtTime(c,a.ctx.currentTime);for(d=0;d<b._howls.length;d++)if(!b._howls[d]._webAudio){h=b._howls[d]._getSoundIds();for(g=0;g<h.length;g++)e=b._howls[d]._soundById(h[g]),e&&e._node&&(e._node.volume=e._volume*c)}return b}return b._volume},mute:function(e){var b=this||a,c,h,g,d;b.ctx||f(),b._muted=e,b.usingWebAudio&&b.masterGain.gain.setValueAtTime(e?0:b._volume,a.ctx.currentTime);for(c=0;c<b._howls.length;c++)if(!b._howls[c]._webAudio){h=b._howls[c]._getSoundIds();for(g=0;g<h.length;g++)d=b._howls[c]._soundById(h[g]),d&&d._node&&(d._node.muted=!!e||d._muted)}return b},unload:function(){for(var b=this||a,c=b._howls.length-1;c>=0;c--)b._howls[c].unload();return b.usingWebAudio&&b.ctx&&typeof b.ctx.close!='undefined'&&(b.ctx.close(),b.ctx=null,f()),b},codecs:function(b){return(this||a)._codecs[b.replace(/^x-/,'')]},_setup:function(){var b=this||a,c;if(b.state=b.ctx?b.ctx.state||'suspended':'suspended',b._autoSuspend(),!b.usingWebAudio)if(typeof Audio!='undefined')try{c=new Audio,typeof c.oncanplaythrough=='undefined'&&(b._canPlayEvent='canplay')}catch(a){b.noAudio=!0}else b.noAudio=!0;try{c=new Audio,c.muted&&(b.noAudio=!0)}catch(a){}return b.noAudio||b._setupCodecs(),b},_setupCodecs:function(){var c=this||a,b=null,d,e,f;try{b=typeof Audio!='undefined'?new Audio:null}catch(a){return c}return!b||typeof b.canPlayType!='function'?c:(d=b.canPlayType('audio/mpeg;').replace(/^no$/,''),e=c._navigator&&c._navigator.userAgent.match(/OPR\/([0-6].)/g),f=e&&parseInt(e[0].split('/')[1],10)<33,c._codecs={mp3:!!(!f&&(d||b.canPlayType('audio/mp3;').replace(/^no$/,''))),mpeg:!!d,opus:!!b.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,''),ogg:!!b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,''),oga:!!b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,''),wav:!!b.canPlayType('audio/wav; codecs="1"').replace(/^no$/,''),aac:!!b.canPlayType('audio/aac;').replace(/^no$/,''),caf:!!b.canPlayType('audio/x-caf;').replace(/^no$/,''),m4a:!!(b.canPlayType('audio/x-m4a;')||b.canPlayType('audio/m4a;')||b.canPlayType('audio/aac;')).replace(/^no$/,''),mp4:!!(b.canPlayType('audio/x-mp4;')||b.canPlayType('audio/mp4;')||b.canPlayType('audio/aac;')).replace(/^no$/,''),weba:!!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,''),webm:!!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,''),dolby:!!b.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,''),flac:!!(b.canPlayType('audio/x-flac;')||b.canPlayType('audio/flac;')).replace(/^no$/,'')},c)},_enableMobileAudio:function(){var b=this||a,d=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(b._navigator&&b._navigator.userAgent),c;if(b._mobileEnabled||!b.ctx||!d)return;return b._mobileEnabled=!1,b.mobileAutoEnable=!1,!b._mobileUnloaded&&b.ctx.sampleRate!==44100&&(b._mobileUnloaded=!0,b.unload()),b._scratchBuffer=b.ctx.createBuffer(1,1,22050),c=function(e){a._autoResume();var d=b.ctx.createBufferSource();d.buffer=b._scratchBuffer,d.connect(b.ctx.destination),typeof d.start=='undefined'?d.noteOn(0):d.start(0),typeof b.ctx.resume=='function'&&b.ctx.resume(),d.onended=function(){d.disconnect(0),b._mobileEnabled=!0,document.removeEventListener('touchstart',c,!0),document.removeEventListener('touchend',c,!0),document.removeEventListener('click',c,!0);for(var a=0;a<b._howls.length;a++)b._howls[a]._emit('unlock')}},document.addEventListener('touchstart',c,!0),document.addEventListener('touchend',c,!0),document.addEventListener('click',c,!0),b},_autoSuspend:function(){var b=this,c,d;if(!b.autoSuspend||!b.ctx||typeof b.ctx.suspend=='undefined'||!a.usingWebAudio)return;for(c=0;c<b._howls.length;c++)if(b._howls[c]._webAudio)for(d=0;d<b._howls[c]._sounds.length;d++)if(!b._howls[c]._sounds[d]._paused)return b;return b._suspendTimer&&clearTimeout(b._suspendTimer),b._suspendTimer=setTimeout(function(){if(!b.autoSuspend)return;b._suspendTimer=null,b.state='suspending',b.ctx.suspend().then(function(){b.state='suspended',b._resumeAfterSuspend&&(delete b._resumeAfterSuspend,b._autoResume())})},3e4),b},_autoResume:function(){var b=this;if(!b.ctx||typeof b.ctx.resume=='undefined'||!a.usingWebAudio)return;return b.state==='running'&&b._suspendTimer?(clearTimeout(b._suspendTimer),b._suspendTimer=null):b.state==='suspended'?(b.ctx.resume().then(function(){b.state='running';for(var a=0;a<b._howls.length;a++)b._howls[a]._emit('resume')}),b._suspendTimer&&(clearTimeout(b._suspendTimer),b._suspendTimer=null)):b.state==='suspending'&&(b._resumeAfterSuspend=!0),b}},a=new e,c=function(a){var b=this;if(!a.src||a.src.length===0){console.error('An array of source files must be passed with any new Howl.');return}b.init(a)},c.prototype={init:function(b){var c=this;return a.ctx||f(),c._autoplay=b.autoplay||!1,c._format=typeof b.format!='string'?b.format:[b.format],c._html5=b.html5||!1,c._muted=b.mute||!1,c._loop=b.loop||!1,c._pool=b.pool||5,c._preload=!(typeof b.preload=='boolean')||b.preload,c._rate=b.rate||1,c._sprite=b.sprite||{},c._src=typeof b.src!='string'?b.src:[b.src],c._volume=b.volume!==void 0?b.volume:1,c._xhrWithCredentials=b.xhrWithCredentials||!1,c._duration=0,c._state='unloaded',c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=b.onend?[{fn:b.onend}]:[],c._onfade=b.onfade?[{fn:b.onfade}]:[],c._onload=b.onload?[{fn:b.onload}]:[],c._onloaderror=b.onloaderror?[{fn:b.onloaderror}]:[],c._onplayerror=b.onplayerror?[{fn:b.onplayerror}]:[],c._onpause=b.onpause?[{fn:b.onpause}]:[],c._onplay=b.onplay?[{fn:b.onplay}]:[],c._onstop=b.onstop?[{fn:b.onstop}]:[],c._onmute=b.onmute?[{fn:b.onmute}]:[],c._onvolume=b.onvolume?[{fn:b.onvolume}]:[],c._onrate=b.onrate?[{fn:b.onrate}]:[],c._onseek=b.onseek?[{fn:b.onseek}]:[],c._onunlock=b.onunlock?[{fn:b.onunlock}]:[],c._onresume=[],c._webAudio=a.usingWebAudio&&!c._html5,typeof a.ctx!='undefined'&&a.ctx&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(c),c._autoplay&&c._queue.push({event:'play',action:function(){c.play()}}),c._preload&&c.load(),c},load:function(){var b=this,f=null,e,c,g;if(a.noAudio){b._emit('loaderror',null,'No audio support.');return}typeof b._src=='string'&&(b._src=[b._src]);for(e=0;e<b._src.length;e++){if(b._format&&b._format[e])c=b._format[e];else{if(g=b._src[e],typeof g!='string'){b._emit('loaderror',null,'Non-string found in selected audio sources - ignoring.');continue}c=/^data:audio\/([^;,]+);/i.exec(g),c||(c=/\.([^.]+)$/.exec(g.split('?',1)[0])),c&&(c=c[1].toLowerCase())}if(c||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),c&&a.codecs(c)){f=b._src[e];break}}if(!f){b._emit('loaderror',null,'No codec support for selected audio sources.');return}return b._src=f,b._state='loading',window.location.protocol==='https:'&&f.slice(0,5)==='http:'&&(b._html5=!0,b._webAudio=!1),new d(b),b._webAudio&&i(b),b},play:function(e,i){var c=this,g=null,q,h,b,p,f,k,l,s,n,u,j,d,r,m,t,o;if(typeof e=='number')g=e,e=null;else if(typeof e=='string'&&c._state==='loaded'&&!c._sprite[e])return null;else if(typeof e=='undefined'){e='__default',q=0;for(h=0;h<c._sounds.length;h++)c._sounds[h]._paused&&!c._sounds[h]._ended&&(q++,g=c._sounds[h]._id);q===1?e=null:g=null}if(b=g?c._soundById(g):c._inactiveSound(),!b)return null;if(g&&!e&&(e=b._sprite||'__default'),c._state!=='loaded')return b._sprite=e,b._ended=!1,p=b._id,c._queue.push({event:'play',action:function(){c.play(p)}}),p;if(g&&!b._paused)return i||c._loadQueue('play'),b._id;if(c._webAudio&&a._autoResume(),f=Math.max(0,b._seek>0?b._seek:c._sprite[e][0]/1e3),k=Math.max(0,(c._sprite[e][0]+c._sprite[e][1])/1e3-f),l=k*1e3/Math.abs(b._rate),s=c._sprite[e][0]/1e3,n=(c._sprite[e][0]+c._sprite[e][1])/1e3,u=!!(b._loop||c._sprite[e][2]),b._sprite=e,j=function(){b._paused=!1,b._ended=!1,b._seek=f,b._start=s,b._stop=n,b._loop=u},f>=n){c._ended(b);return}return d=b._node,c._webAudio?(r=function(){j(),c._refreshBuffer(b);var e=b._muted||c._muted?0:b._volume;d.gain.setValueAtTime(e,a.ctx.currentTime),b._playStart=a.ctx.currentTime,typeof d.bufferSource.start=='undefined'?b._loop?d.bufferSource.noteGrainOn(0,f,86400):d.bufferSource.noteGrainOn(0,f,k):b._loop?d.bufferSource.start(0,f,86400):d.bufferSource.start(0,f,k),l!==1/0&&(c._endTimers[b._id]=setTimeout(c._ended.bind(c,b),l)),i||setTimeout(function(){c._emit('play',b._id)},0)},a.state==='running'?r():(c.once('resume',r),c._clearTimer(b._id))):(m=function(){d.currentTime=f,d.muted=b._muted||c._muted||a._muted||d.muted,d.volume=b._volume*a.volume(),d.playbackRate=b._rate;try{var g=d.play();if(g&&typeof Promise!='undefined'&&(g instanceof Promise||typeof g.then=='function')?(c._playLock=!0,g.then(function(){j(),c._playLock=!1,i||c._emit('play',b._id)}).catch(function(){c._playLock=!1,c._emit('playerror',b._id,'Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.')})):i||(j(),c._emit('play',b._id)),d.playbackRate=b._rate,d.paused){c._emit('playerror',b._id,'Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.');return}e!=='__default'||b._loop?c._endTimers[b._id]=setTimeout(c._ended.bind(c,b),l):(c._endTimers[b._id]=function(){c._ended(b),d.removeEventListener('ended',c._endTimers[b._id],!1)},d.addEventListener('ended',c._endTimers[b._id],!1))}catch(a){c._emit('playerror',b._id,a)}},t=window&&window.ejecta||!d.readyState&&a._navigator.isCocoonJS,d.readyState>=3||t?m():(o=function(){m(),d.removeEventListener(a._canPlayEvent,o,!1)},d.addEventListener(a._canPlayEvent,o,!1),c._clearTimer(b._id))),b._id},pause:function(e){var b=this,d,c,a;if(b._state!=='loaded'||b._playLock)return b._queue.push({event:'pause',action:function(){b.pause(e)}}),b;d=b._getSoundIds(e);for(c=0;c<d.length;c++){if(b._clearTimer(d[c]),a=b._soundById(d[c]),a&&!a._paused)if(a._seek=b.seek(d[c]),a._rateSeek=0,a._paused=!0,b._stopFade(d[c]),a._node)if(b._webAudio){if(!a._node.bufferSource)continue;typeof a._node.bufferSource.stop=='undefined'?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),b._cleanBuffer(a._node)}else(!isNaN(a._node.duration)||a._node.duration===1/0)&&a._node.pause();arguments[1]||b._emit('pause',a?a._id:null)}return b},stop:function(e,f){var b=this,d,c,a;if(b._state!=='loaded'||b._playLock)return b._queue.push({event:'stop',action:function(){b.stop(e)}}),b;d=b._getSoundIds(e);for(c=0;c<d.length;c++)b._clearTimer(d[c]),a=b._soundById(d[c]),a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,b._stopFade(d[c]),a._node&&(b._webAudio?a._node.bufferSource&&(typeof a._node.bufferSource.stop=='undefined'?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),b._cleanBuffer(a._node)):(!isNaN(a._node.duration)||a._node.duration===1/0)&&(a._node.currentTime=a._start||0,a._node.pause())),f||b._emit('stop',a._id));return b},mute:function(d,e){var b=this,g,f,c;if(b._state!=='loaded'||b._playLock)return b._queue.push({event:'mute',action:function(){b.mute(d,e)}}),b;if(typeof e=='undefined')if(typeof d=='boolean')b._muted=d;else return b._muted;g=b._getSoundIds(e);for(f=0;f<g.length;f++)c=b._soundById(g[f]),c&&(c._muted=d,c._interval&&b._stopFade(c._id),b._webAudio&&c._node?c._node.gain.setValueAtTime(d?0:c._volume,a.ctx.currentTime):c._node&&(c._node.muted=!!a._muted||d),b._emit('mute',c._id));return b},volume:function(){var b=this,d=arguments,f,e,h,i,c,g;if(d.length===0)return b._volume;if(d.length===1||d.length===2&&typeof d[1]=='undefined'?(h=b._getSoundIds(),i=h.indexOf(d[0]),i>=0?e=parseInt(d[0],10):f=parseFloat(d[0])):d.length>=2&&(f=parseFloat(d[0]),e=parseInt(d[1],10)),typeof f!='undefined'&&f>=0&&f<=1){{if(b._state!=='loaded'||b._playLock)return b._queue.push({event:'volume',action:function(){b.volume.apply(b,d)}}),b;typeof e=='undefined'&&(b._volume=f),e=b._getSoundIds(e);for(g=0;g<e.length;g++)c=b._soundById(e[g]),c&&(c._volume=f,d[2]||b._stopFade(e[g]),b._webAudio&&c._node&&!c._muted?c._node.gain.setValueAtTime(f,a.ctx.currentTime):c._node&&!c._muted&&(c._node.volume=f*a.volume()),b._emit('volume',c._id))}}else return c=e?b._soundById(e):b._sounds[0],c?c._volume:0;return b},fade:function(c,h,e,f){var b=this,i,g,d,j,k;if(b._state!=='loaded'||b._playLock)return b._queue.push({event:'fade',action:function(){b.fade(c,h,e,f)}}),b;c=parseFloat(c),h=parseFloat(h),e=parseFloat(e),b.volume(c,f),i=b._getSoundIds(f);for(g=0;g<i.length;g++)d=b._soundById(i[g]),d&&(f||b._stopFade(i[g]),b._webAudio&&!d._muted&&(j=a.ctx.currentTime,k=j+e/1e3,d._volume=c,d._node.gain.setValueAtTime(c,j),d._node.gain.linearRampToValueAtTime(h,k)),b._startFadeInterval(d,c,h,e,i[g],typeof f=='undefined'));return b},_startFadeInterval:function(b,e,c,f,l,k){var d=this,a=e,h=c-e,i=Math.abs(h/.01),j=Math.max(4,i>0?f/i:f),g=Date.now();b._fadeTo=c,b._interval=setInterval(function(){var i=(Date.now()-g)/f;g=Date.now(),a+=h*i,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(a*100)/100,d._webAudio?b._volume=a:d.volume(a,b._id,!0),k&&(d._volume=a),(c<e&&a<=c||c>e&&a>=c)&&(clearInterval(b._interval),b._interval=null,b._fadeTo=null,d.volume(c,b._id),d._emit('fade',b._id))},j)},_stopFade:function(d){var c=this,b=c._soundById(d);return b&&b._interval&&(c._webAudio&&b._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(b._interval),b._interval=null,c.volume(b._fadeTo,d),b._fadeTo=null,c._emit('fade',d)),c},loop:function(){var c=this,b=arguments,d,f,a,g,e;if(b.length===0)return c._loop;if(b.length===1)if(typeof b[0]=='boolean')d=b[0],c._loop=d;else return a=c._soundById(parseInt(b[0],10)),!!a&&a._loop;else b.length===2&&(d=b[0],f=parseInt(b[1],10));g=c._getSoundIds(f);for(e=0;e<g.length;e++)a=c._soundById(g[e]),a&&(a._loop=d,c._webAudio&&a._node&&a._node.bufferSource&&(a._node.bufferSource.loop=d,d&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop)));return c},rate:function(){var b=this,e=arguments,g,d,h,i,c,f,j,k,l;if(e.length===0?d=b._sounds[0]._id:e.length===1?(h=b._getSoundIds(),i=h.indexOf(e[0]),i>=0?d=parseInt(e[0],10):g=parseFloat(e[0])):e.length===2&&(g=parseFloat(e[0]),d=parseInt(e[1],10)),typeof g=='number'){{if(b._state!=='loaded'||b._playLock)return b._queue.push({event:'rate',action:function(){b.rate.apply(b,e)}}),b;typeof d=='undefined'&&(b._rate=g),d=b._getSoundIds(d);for(f=0;f<d.length;f++)c=b._soundById(d[f]),c&&(c._rateSeek=b.seek(d[f]),c._playStart=b._webAudio?a.ctx.currentTime:c._playStart,c._rate=g,b._webAudio&&c._node&&c._node.bufferSource?c._node.bufferSource.playbackRate.setValueAtTime(g,a.ctx.currentTime):c._node&&(c._node.playbackRate=g),j=b.seek(d[f]),k=(b._sprite[c._sprite][0]+b._sprite[c._sprite][1])/1e3-j,l=k*1e3/Math.abs(c._rate),(b._endTimers[d[f]]||!c._paused)&&(b._clearTimer(d[f]),b._endTimers[d[f]]=setTimeout(b._ended.bind(b,c),l)),b._emit('rate',c._id))}}else return c=b._soundById(d),c?c._rate:b._rate;return b},seek:function(){var b=this,e=arguments,f,c,j,k,d,g,h,i,l,m;if(e.length===0?c=b._sounds[0]._id:e.length===1?(j=b._getSoundIds(),k=j.indexOf(e[0]),k>=0?c=parseInt(e[0],10):b._sounds.length&&(c=b._sounds[0]._id,f=parseFloat(e[0]))):e.length===2&&(f=parseFloat(e[0]),c=parseInt(e[1],10)),typeof c=='undefined')return b;if(b._state!=='loaded'||b._playLock)return b._queue.push({event:'seek',action:function(){b.seek.apply(b,e)}}),b;if(d=b._soundById(c),d)if(typeof f=='number'&&f>=0)g=b.playing(c),g&&b.pause(c,!0),d._seek=f,d._ended=!1,b._clearTimer(c),!b._webAudio&&d._node&&(d._node.currentTime=f),h=function(){b._emit('seek',c),g&&b.play(c,!0)},g&&!b._webAudio?(i=function(){b._playLock?setTimeout(i,0):h()},setTimeout(i,0)):h();else return b._webAudio?(l=b.playing(c)?a.ctx.currentTime-d._playStart:0,m=d._rateSeek?d._rateSeek-d._seek:0,d._seek+(m+l*Math.abs(d._rate))):d._node.currentTime;return b},playing:function(c){var a=this,d,b;if(typeof c=='number')return d=a._soundById(c),!!d&&!d._paused;for(b=0;b<a._sounds.length;b++)if(!a._sounds[b]._paused)return!0;return!1},duration:function(d){var a=this,b=a._duration,c=a._soundById(d);return c&&(b=a._sprite[c._sprite][1]/1e3),b},state:function(){return this._state},unload:function(){for(var d=this,e=d._sounds,c=0,h,f,g;c<e.length;c++)e[c]._paused||d.stop(e[c]._id),d._webAudio||(h=/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent),h||(e[c]._node.src='data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA'),e[c]._node.removeEventListener('error',e[c]._errorFn,!1),e[c]._node.removeEventListener(a._canPlayEvent,e[c]._loadFn,!1)),delete e[c]._node,d._clearTimer(e[c]._id);f=a._howls.indexOf(d),f>=0&&a._howls.splice(f,1),g=!0;for(c=0;c<a._howls.length;c++)if(a._howls[c]._src===d._src){g=!1;break}return b&&g&&delete b[d._src],a.noAudio=!1,d._state='unloaded',d._sounds=[],d=null,null},on:function(e,a,b,c){var d=this,f=d['_on'+e];return typeof a=='function'&&f.push(c?{id:b,fn:a,once:c}:{id:b,fn:a}),d},off:function(f,b,g){var c=this,d=c['_on'+f],a=0,h,e;if(typeof b=='number'&&(g=b,b=null),b||g){for(a=0;a<d.length;a++)if(h=g===d[a].id,b===d[a].fn&&h||!b&&h){d.splice(a,1);break}}else if(f)c['_on'+f]=[];else{e=Object.keys(c);for(a=0;a<e.length;a++)e[a].indexOf('_on')===0&&Array.isArray(c[e[a]])&&(c[e[a]]=[])}return c},once:function(b,c,d){var a=this;return a.on(b,c,d,1),a},_emit:function(d,e,f){for(var c=this,b=c['_on'+d],a=b.length-1;a>=0;a--)(!b[a].id||b[a].id===e||d==='load')&&(setTimeout(function(a){a.call(this,e,f)}.bind(c,b[a].fn),0),b[a].once&&c.off(d,b[a].fn,b[a].id));return c._loadQueue(d),c},_loadQueue:function(b){var a=this,c;return a._queue.length>0&&(c=a._queue[0],c.event===b&&(a._queue.shift(),a._loadQueue()),b||c.action()),a},_ended:function(b){var c=this,e=b._sprite,d,f;return!c._webAudio&&b._node&&!b._node.paused&&!b._node.ended&&b._node.currentTime<b._stop?(setTimeout(c._ended.bind(c,b),100),c):(d=!!(b._loop||c._sprite[e][2]),c._emit('end',b._id),!c._webAudio&&d&&c.stop(b._id,!0).play(b._id),c._webAudio&&d&&(c._emit('play',b._id),b._seek=b._start||0,b._rateSeek=0,b._playStart=a.ctx.currentTime,f=(b._stop-b._start)*1e3/Math.abs(b._rate),c._endTimers[b._id]=setTimeout(c._ended.bind(c,b),f)),c._webAudio&&!d&&(b._paused=!0,b._ended=!0,b._seek=b._start||0,b._rateSeek=0,c._clearTimer(b._id),c._cleanBuffer(b._node),a._autoSuspend()),!c._webAudio&&!d&&c.stop(b._id,!0),c)},_clearTimer:function(b){var a=this,c;return a._endTimers[b]&&(typeof a._endTimers[b]!='function'?clearTimeout(a._endTimers[b]):(c=a._soundById(b),c&&c._node&&c._node.removeEventListener('ended',a._endTimers[b],!1)),delete a._endTimers[b]),a},_soundById:function(c){for(var b=this,a=0;a<b._sounds.length;a++)if(c===b._sounds[a]._id)return b._sounds[a];return null},_inactiveSound:function(){var a=this,b;a._drain();for(b=0;b<a._sounds.length;b++)if(a._sounds[b]._ended)return a._sounds[b].reset();return new d(a)},_drain:function(){var b=this,d=b._pool,c=0,a=0;if(b._sounds.length<d)return;for(a=0;a<b._sounds.length;a++)b._sounds[a]._ended&&c++;for(a=b._sounds.length-1;a>=0;a--){if(c<=d)return;b._sounds[a]._ended&&(b._webAudio&&b._sounds[a]._node&&b._sounds[a]._node.disconnect(0),b._sounds.splice(a,1),c--)}},_getSoundIds:function(b){var c=this,d,a;if(typeof b=='undefined'){d=[];for(a=0;a<c._sounds.length;a++)d.push(c._sounds[a]._id);return d}return[b]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=a.ctx.createBufferSource(),c._node.bufferSource.buffer=b[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,a.ctx.currentTime),d},_cleanBuffer:function(b){var c=this;if(a._scratchBuffer&&b.bufferSource){b.bufferSource.onended=null,b.bufferSource.disconnect(0);try{b.bufferSource.buffer=a._scratchBuffer}catch(a){}}return b.bufferSource=null,c}},d=function(a){this._parent=a,this.init()},d.prototype={init:function(){var b=this,c=b._parent;return b._muted=c._muted,b._loop=c._loop,b._volume=c._volume,b._rate=c._rate,b._seek=0,b._paused=!0,b._ended=!0,b._sprite='__default',b._id=++a._counter,c._sounds.push(b),b.create(),b},create:function(){var b=this,c=b._parent,d=a._muted||b._muted||b._parent._muted?0:b._volume;return c._webAudio?(b._node=typeof a.ctx.createGain=='undefined'?a.ctx.createGainNode():a.ctx.createGain(),b._node.gain.setValueAtTime(d,a.ctx.currentTime),b._node.paused=!0,b._node.connect(a.masterGain)):(b._node=new Audio,b._errorFn=b._errorListener.bind(b),b._node.addEventListener('error',b._errorFn,!1),b._loadFn=b._loadListener.bind(b),b._node.addEventListener(a._canPlayEvent,b._loadFn,!1),b._node.src=c._src,b._node.preload='auto',b._node.volume=d*a.volume(),b._node.load()),b},reset:function(){var b=this,c=b._parent;return b._muted=c._muted,b._loop=c._loop,b._volume=c._volume,b._rate=c._rate,b._seek=0,b._rateSeek=0,b._paused=!0,b._ended=!0,b._sprite='__default',b._id=++a._counter,b},_errorListener:function(){var a=this;a._parent._emit('loaderror',a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener('error',a._errorFn,!1)},_loadListener:function(){var c=this,b=c._parent;b._duration=Math.ceil(c._node.duration*10)/10,Object.keys(b._sprite).length===0&&(b._sprite={__default:[0,b._duration*1e3]}),b._state!=='loaded'&&(b._state='loaded',b._emit('load'),b._loadQueue()),c._node.removeEventListener(a._canPlayEvent,c._loadFn,!1)}},b={},i=function(a){var d=a._src,f,i,e,c;if(b[d]){a._duration=b[d].duration,h(a);return}if(/^data:[^;]+;base64,/.test(d)){f=atob(d.split(',')[1]),i=new Uint8Array(f.length);for(e=0;e<f.length;++e)i[e]=f.charCodeAt(e);g(i.buffer,a)}else c=new XMLHttpRequest,c.open('GET',d,!0),c.withCredentials=a._xhrWithCredentials,c.responseType='arraybuffer',c.onload=function(){var b=(c.status+'')[0];if(b!=='0'&&b!=='2'&&b!=='3'){a._emit('loaderror',null,'Failed loading audio file with status: '+c.status+'.');return}g(c.response,a)},c.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete b[d],a.load())},j(c)},j=function(a){try{a.send()}catch(b){a.onerror()}},g=function(e,c){var d=function(){c._emit('loaderror',null,'Decoding audio data failed.')},f=function(a){a&&c._sounds.length>0?(b[c._src]=a,h(c,a)):d()};typeof Promise!='undefined'&&a.ctx.decodeAudioData.length===1?a.ctx.decodeAudioData(e).then(f).catch(d):a.ctx.decodeAudioData(e,f,d)},h=function(a,b){b&&!a._duration&&(a._duration=b.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=='loaded'&&(a._state='loaded',a._emit('load'),a._loadQueue())},f=function(){var e,b,c,d;if(!a.usingWebAudio)return;try{typeof AudioContext!='undefined'?a.ctx=new AudioContext:typeof webkitAudioContext!='undefined'?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(b){a.usingWebAudio=!1}e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),b=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=b?parseInt(b[1],10):null,e&&c&&c<9&&(d=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase()),(a._navigator&&a._navigator.standalone&&!d||a._navigator&&!a._navigator.standalone&&!d)&&(a.usingWebAudio=!1)),a.usingWebAudio&&(a.masterGain=typeof a.ctx.createGain=='undefined'?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:1,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()},typeof define=='function'&&define.amd&&define([],function(){return{Howler:a,Howl:c}}),typeof exports!='undefined'&&(exports.Howler=a,exports.Howl=c),typeof window!='undefined'?(window.HowlerGlobal=e,window.Howler=a,window.Howl=c,window.Sound=d):typeof global!='undefined'&&(global.HowlerGlobal=e,global.Howler=a,global.Howl=c,global.Sound=d)})()